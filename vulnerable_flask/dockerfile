# Use Ubuntu as the base image for linux/amd64 platform
FROM --platform=linux/amd64 ubuntu

# Set a non-root user (replace 'myuser' with your desired username)
RUN useradd -m myuser
WORKDIR /home/myuser

# Install Python, pip, and git
RUN apt-get update && \
    apt-get upgrade -y && \
    apt-get install -y python3 python3-pip git

# Clone the GitHub repository
RUN git clone https://github.com/is-yusuf/Comps-pentesting

# Execute the setup.sh script
RUN pip3 install flask python-dotenv

# Set the entry point to execute the Python script
ENTRYPOINT ["python3", "/home/myuser/Comps-pentesting/vulnerable_flask/python.py"]
