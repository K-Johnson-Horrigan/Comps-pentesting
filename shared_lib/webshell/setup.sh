#!/bin/bash

# **1. Group creation**
sudo groupadd bar

# **2. File ownership and permissions**
sudo chown root:bar script.sh  # Assuming 'script.sh' is the name of this file
sudo chmod u+rwx script.sh
sudo chmod g+x script.sh
sudo chmod o-rwx script.sh

sudo chown root:bar files  # Assuming 'files' is a directory or file
sudo chmod ug+rwx files
sudo chmod o-rx files

sudo chown root:bar login.php 
sudo chmod gu+rwx login.php
sudo chmod o-rwx login.php

# **3. User creation**
sudo useradd user1 
echo "user1:123456" | chpasswd
sudo useradd user2
echo "user2:321654" | chpasswd
sudo useradd user3
echo "user3:999999" | chpasswd

# **4. Sudoers configuration**  
echo "Defaults env_keep += LD_PRELOAD" | sudo tee -a /etc/sudoers  > /dev/null
echo "user2 ALL=(ALL:ALL) NOPASSWD: /var/www/html/script.sh" | sudo tee -a /etc/sudoers > /dev/null
